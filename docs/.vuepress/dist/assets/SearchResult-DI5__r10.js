import{u as Y,d as te,e as le,f as B,g as ie,P as ae,t as se,r as re,h as E,i as R,j as oe,w as M,k as l,l as ne,R as $,m as ce,n as ue,p as me,C as de,q as he,s as pe,v as ye,x as be,y as ve,z as ge,A as we,B as _,D as I,E as fe,F as x,G as ke}from"./app-ClVB3lrR.js";const qe=["/","/get-started.html","/e-bill/","/e-bill/adding-node.html","/wildcat-mint/","/e-bill/cryptographic-primitives/","/e-bill/cryptographic-primitives/ed25519.html","/e-bill/cryptographic-primitives/rsa.html","/e-bill/cryptographic-primitives/secp256k1.html","/e-bill/content-of-bill/","/e-bill/content-of-bill/bill-blockchain-consensus.html","/e-bill/content-of-bill/bill-example.html","/e-bill/content-of-bill/bill-key-pairs.html","/e-bill/content-of-bill/download-pdf.html","/e-bill/content-of-bill/field-description.html","/e-bill/content-of-bill/topic-creation.html","/e-bill/content-of-bill/uploading-files.html","/e-bill/identity-record/","/e-bill/identity-record/dht-identity-creation.html","/e-bill/identity-record/field-description.html","/e-bill/identity-record/identity-restore-transfer.html","/e-bill/identity-record/key-pairs-generation.html","/e-bill/identity-record/node-id.html","/e-bill/identity-record/upload-user-material.html","/e-bill/local-build/","/e-bill/local-build/configuration.html","/e-bill/local-build/software-installation.html","/e-bill/local-build/startup-parameters.html","/e-bill/operations/","/e-bill/roles-in-bill/","/e-bill/roles-in-bill/buyer.html","/e-bill/roles-in-bill/drawee.html","/e-bill/roles-in-bill/drawer.html","/e-bill/roles-in-bill/endorsee.html","/e-bill/roles-in-bill/endorser.html","/e-bill/roles-in-bill/guarantor.html","/e-bill/roles-in-bill/holder.html","/e-bill/roles-in-bill/payee.html","/e-bill/roles-in-bill/payer.html","/e-bill/roles-in-bill/seller.html","/e-bill/storage-layer/","/e-bill/transport-layer/","/e-bill/user-documentation/","/e-bill/user-documentation/journey-map.html","/e-bill/user-documentation/settings.html","/e-bill/user-documentation/ui-with-screenshots.html","/wildcat-mint/communication-channels/","/wildcat-mint/credit-tokens/","/wildcat-mint/credit-tokens/delivery.html","/wildcat-mint/credit-tokens/explanation.html","/wildcat-mint/credit-tokens/prefix.html","/wildcat-mint/credit-tokens/wildcat-fee.html","/wildcat-mint/cryptographic-primitives/","/wildcat-mint/cryptographic-primitives/cashu.html","/wildcat-mint/cryptographic-primitives/secp256k1.html","/wildcat-mint/quote/","/wildcat-mint/quote/credit-check.html","/wildcat-mint/quote/discount-interest.html","/wildcat-mint/quote/keyset-generation.html","/wildcat-mint/quote/quota-id.html","/wildcat-mint/quote/user-notification.html","/wildcat-mint/quote/validity-period.html","/wildcat-mint/request-for-minting/","/wildcat-mint/request-for-minting/bill-delivery.html","/wildcat-mint/request-for-minting/keys-delivery.html","/wildcat-mint/terms-faq-glossary/","/wildcat-mint/terms-faq-glossary/faq.html","/wildcat-mint/terms-faq-glossary/glossary.html","/wildcat-mint/terms-faq-glossary/terms.html","/wildcat-mint/token-conversion/","/wildcat-mint/token-conversion/discounting.html","/wildcat-mint/token-conversion/redemption.html","/wildcat-mint/user-quote-check/","/wildcat-mint/user-quote-check/confirmation.html","/wildcat-mint/user-quote-check/rejection.html","/e-bill/operations/accept/","/e-bill/operations/accept/action-details.html","/e-bill/operations/accept/field-description.html","/e-bill/operations/accept/two-vs-three-party.html","/e-bill/operations/buy/","/e-bill/operations/buy/action-details.html","/e-bill/operations/buy/field-description.html","/e-bill/operations/buy/validity-period.html","/e-bill/operations/endorse/","/e-bill/operations/endorse/action-details.html","/e-bill/operations/endorse/field-description.html","/e-bill/operations/issue/","/e-bill/operations/issue/communication-channels.html","/e-bill/operations/issue/field-description.html","/e-bill/operations/issue/three-party-bill.html","/e-bill/operations/issue/two-party-bill.html","/e-bill/operations/pay/","/e-bill/operations/pay/action-details.html","/e-bill/operations/pay/field-description.html","/e-bill/operations/pay/money-transfer-address.html","/e-bill/operations/receive-payment/","/e-bill/operations/receive-payment/action-details.html","/e-bill/operations/receive-payment/field-description.html","/e-bill/operations/recourse/","/e-bill/operations/recourse/action-details.html","/e-bill/operations/recourse/field-description.html","/e-bill/operations/recourse/rules.html","/e-bill/operations/request-to-accept/","/e-bill/operations/request-to-accept/action-details.html","/e-bill/operations/request-to-accept/field-description.html","/e-bill/operations/request-to-accept/two-vs-three-party.html","/e-bill/operations/request-to-pay/","/e-bill/operations/request-to-pay/action-details.html","/e-bill/operations/request-to-pay/field-description.html","/e-bill/operations/sale/","/e-bill/operations/sale/action-details.html","/e-bill/operations/sale/field-description.html","/e-bill/operations/sale/money-transfer-address.html","/e-bill/operations/sale/validity-period.html","/e-bill/storage-layer/dht/","/e-bill/storage-layer/dht/dht-usage.html","/e-bill/storage-layer/dht/events.html","/e-bill/storage-layer/dht/libp2p-links.html","/e-bill/storage-layer/dht/node-joining.html","/e-bill/storage-layer/dht/topics.html","/e-bill/storage-layer/nostr/","/e-bill/storage-layer/nostr/data-storage.html","/e-bill/storage-layer/nostr/event-description.html","/e-bill/storage-layer/nostr/migration.html","/e-bill/storage-layer/nostr/nostr-usage.html","/e-bill/storage-layer/nostr/relay-role.html","/e-bill/transport-layer/dht/","/e-bill/transport-layer/dht/dcutr.html","/e-bill/transport-layer/dht/relay-role.html","/e-bill/transport-layer/dht/topics.html","/e-bill/transport-layer/nostr/","/e-bill/transport-layer/nostr/migration.html","/e-bill/transport-layer/nostr/relay-role.html","/wildcat-mint/communication-channels/credit-tokens/","/wildcat-mint/communication-channels/credit-tokens/nfc.html","/wildcat-mint/communication-channels/credit-tokens/qr.html","/wildcat-mint/communication-channels/credit-tokens/redeeming-tokens.html","/wildcat-mint/communication-channels/credit-tokens/sending-tokens.html","/wildcat-mint/communication-channels/credit-tokens/string.html","/wildcat-mint/communication-channels/wildcat-api/","/wildcat-mint/communication-channels/wildcat-api/bills.html","/wildcat-mint/communication-channels/wildcat-api/quotes.html","/404.html"],He="SEARCH_PRO_QUERY_HISTORY",v=Y(He,[]),Re=()=>{const{queryHistoryCount:i}=x,a=i>0;return{enabled:a,queryHistory:v,addQueryHistory:s=>{a&&(v.value=Array.from(new Set([s,...v.value.slice(0,i-1)])))},removeQueryHistory:s=>{v.value=[...v.value.slice(0,s),...v.value.slice(s+1)]}}},F=i=>qe[i.id]+("anchor"in i?`#${i.anchor}`:""),xe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:U}=x,g=Y(xe,[]),Qe=()=>{const i=U>0;return{enabled:i,resultHistory:g,addResultHistory:a=>{if(i){const s={link:F(a),display:a.display};"header"in a&&(s.header=a.header),g.value=[s,...g.value.slice(0,U-1)]}},removeResultHistory:a=>{g.value=[...g.value.slice(0,a),...g.value.slice(a+1)]}}},Se=i=>{const a=de(),s=B(),Q=he(),o=E(0),k=R(()=>o.value>0),p=pe([]);return ye(()=>{const{search:y,terminate:S}=be(),w=fe(u=>{const f=u.join(" "),{searchFilter:C=h=>h,splitWord:D,suggestionsFilter:P,...b}=a.value;f?(o.value+=1,y(u.join(" "),s.value,b).then(h=>C(h,f,s.value,Q.value)).then(h=>{o.value-=1,p.value=h}).catch(h=>{console.warn(h),o.value-=1,o.value||(p.value=[])})):p.value=[]},x.searchDelay-x.suggestDelay);M([i,s],([u])=>w(u),{immediate:!0}),ve(()=>{S()})}),{isSearching:k,results:p}};var De=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:a}){const s=le(),Q=B(),o=ie(ae),{enabled:k,addQueryHistory:p,queryHistory:y,removeQueryHistory:S}=Re(),{enabled:w,resultHistory:u,addResultHistory:f,removeResultHistory:C}=Qe(),D=k||w,P=se(i,"queries"),{results:b,isSearching:h}=Se(P),r=re({isQuery:!0,index:0}),m=E(0),d=E(0),O=R(()=>D&&(y.value.length>0||u.value.length>0)),L=R(()=>b.value.length>0),j=R(()=>b.value[m.value]||null),z=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?u.value.length-1:y.value.length-1):r.index=t-1},G=()=>{const{isQuery:e,index:t}=r;t===(e?y.value.length-1:u.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},V=()=>{m.value=m.value>0?m.value-1:b.value.length-1,d.value=j.value.contents.length-1},J=()=>{m.value=m.value<b.value.length-1?m.value+1:0,d.value=0},K=()=>{d.value<j.value.contents.length-1?d.value+=1:J()},N=()=>{d.value>0?d.value-=1:V()},A=e=>e.map(t=>ke(t)?t:l(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ge[e.index]||"$content",[n,H=""]=we(t)?t[Q.value].split("$content"):t.split("$content");return e.display.map(c=>l("div",A([n,...c,H])))}return e.display.map(t=>l("div",A(t)))},q=()=>{m.value=0,d.value=0,a("updateQuery",""),a("close")},X=()=>k?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},o.value.queryHistory),y.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{a("updateQuery",e)}},[l(_,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),S(t)}})]))])):null,Z=()=>w?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},o.value.resultHistory),u.value.map((e,t)=>l($,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{q()}},()=>[l(_,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(n=>A(n)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),C(t)}})]))])):null;return oe("keydown",e=>{if(i.isFocusing){if(L.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const t=j.value.contents[d.value];p(i.queries.join(" ")),f(t),s.push(F(t)),q()}}else if(w){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(a("updateQuery",y.value[t]),e.preventDefault()):(s.push(u.value[t].link),q())}}}}),M([m,d],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:i.queries.length?!L.value:!O.value}],id:"search-pro-results"},i.queries.length?h.value?l(ne,{hint:o.value.searching}):L.value?l("ul",{class:"search-pro-result-list"},b.value.map(({title:e,contents:t},n)=>{const H=m.value===n;return l("li",{class:["search-pro-result-list-item",{active:H}]},[l("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((c,ee)=>{const T=H&&d.value===ee;return l($,{to:F(c),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{p(i.queries.join(" ")),f(c),q()}},()=>[c.type==="text"?null:l(c.type==="title"?ce:c.type==="heading"?ue:me,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?l("div",{class:"content-header"},c.header):null,l("div",W(c))])])})])})):o.value.emptyResult:D?O.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{De as default};
